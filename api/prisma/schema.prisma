// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Users {
  id                  Int               @id @default(autoincrement())
  name                String
  role                Roles             @relation(fields: [roleId], references: [id])
  roleId              Int
  team                Teams?            @relation(fields: [teamId], references: [id])
  teamId              Int?
  game                Games?            @relation(fields: [gameId], references: [id])
  gameId              Int?
}

model Roles {
  id                  Int               @id @default(autoincrement())
  name                String
  User                Users[]
}

model Teams {
  id                  Int               @id @default(autoincrement())
  teamName            String
  teamLeaderId        Int
  teamScore           Int
  game                Games             @relation(fields: [gameId], references: [id])
  gameId              Int
  User                Users[]
}

model Topics {
  id                  Int               @id @default(autoincrement())
  name                String
  Phrase              Phrases[]
  GameTopic           GameTopics[]
}

model Phrases {
  id                  Int               @id @default(autoincrement())
  body                String
  wordCount           Int
  topic               Topics            @relation(fields: [topicId], references: [id])
  topicId             Int
}

model Games {
  id                  Int               @id @default(autoincrement())
	name								String						
  rounds              Int
  gameCode            String          	@unique  
	publishedAt 				DateTime					@default(now())
  Team                Teams[]
  User                Users[]
  GameTopic           GameTopics[]
}

model GameTopics {
  id                  Int               @id @default(autoincrement())
  topic               Topics            @relation(fields: [topicId], references: [id])
  topicId             Int
  game                Games             @relation(fields: [gameId], references: [id])
  gameId              Int
}

model Rounds {
  id                  Int               @id @default(autoincrement())
  gameId              Int
  topicId             Int
}

model Turns {
  id                  Int               @id @default(autoincrement())
  performingTeamId    Int
  performingTeamScore Int
  guessingTeamId      Int
  guessingTeamScore   Int
  roundId             Int
  currentLineNumber   Int               @default(0)
}

model Haicues {
  id            Int                     @id @default(autoincrement())
  roundId       Int
  teamId        Int
  line1         String
  line2         String
  line3         String
  lineGuessed   Int?
  correctTeam   Int?
}

model Buzzers {
  id            Int                     @id @default(autoincrement())
  turnId        Int
  teamId        Int
  buzzAt        DateTime                @default(now())
}
